<html>
<head>
<title>SCR Votes</title>

<style type="text/css">
input {width: 150px;}
</style>

<script type="text/ecmascript">

  // set global variables
  var svgns = "http://www.w3.org/2000/svg";
  var htmlObj, SVGDoc, SVGRoot, viewBox, goLeft, goRight, innerSVG;
  var currentSize, currentPosition, currentId, currentLabel;
  var imageWidth; // same for all images
  var currentImage;
  var imageBorderDefault, imageBorderHighlight;

  function Initialize() {
    var hrefstring = window.location.href;
    //alert(hrefstring);
    var resolution = hrefstring.substring(hrefstring.lastIndexOf('?')+1);
    //alert(resolution);
    htmlObj = document.getElementById("images"); // embedded image
    htmlObj.src="votingdata/images_" + resolution + ".svg"
    //alert(htmlObj.src);
    SVGDoc = htmlObj.getSVGDocument(); // image doc root node (i.e., can apply getelementbyid)
    SVGRoot = SVGDoc.documentElement; // root svg node (i.e., can get node attribute)
    //var title = SVGRoot.getAttribute('title');
    document.getElementById("title").innerHTML = resolution;
    imageWidth = parseInt(SVGDoc.getElementById("image1").getAttribute('width'));
    currentImage = parseInt(SVGRoot.getAttribute('imageSelected'));
    positionViewBox(currentImage * imageWidth);
    var currentImageName = SVGDoc.getElementById("image" + currentImage + "Label").getAttribute('name');
    document.getElementById("currentImage").innerHTML = currentImageName;
    imageBorderDefault = SVGRoot.getAttribute('imageBorderDefault');
    imageBorderHighlight = SVGRoot.getAttribute('imageBorderHighlight');
  }

  function positionViewBox(coordinate) {
    viewBox = SVGRoot.getAttribute('viewBox');
    var viewVals = viewBox.split(' ');
    var xmin = parseFloat(viewVals[0]);
    var xmax = parseFloat(viewVals[2]);
    var diff;
    if (coordinate > xmax) {
      diff = coordinate - xmax;
      xmax = coordinate;
      xmin += diff;
    }
    else
      if (coordinate < xmin) {
        diff = xmin - coordinate;
        xmin = coordinate;
        xmax -= diff;
      }

    viewVals[0] = xmin;
    //viewVals[2] = xmax;
    SVGRoot.setAttribute('viewBox', viewVals.join(' '));
  }
 
</script>
</head>

<body onload="Initialize()">

<table valign="center" height="100%">
  <tr>
    <td>
      <span id="title"></span>
      <table>
        <tr>
          <td><img src="votingdata/images/person.png"/></td><td>Yes</td><td/><td/><td/><td/>
	  <td><img src="votingdata/images/redperson.png"/></td><td>No</td><td/><td/><td/><td/>
	  <td><img src="votingdata/images/greyperson.png"/></td><td>Abstain</td>
        </tr>
      </table>
      <embed id="images" 
             type="image/svg+xml"/>
    </td>
  </tr>
</table>

<!-- table valign="center">
<tr><td><img src="votingdata/images/greenperson.png"/></td><td>Yes</td><td/><td/><td/>
<td><img src="votingdata/images/redperson.png"/></td><td>N</td><td/><td/><td/>
<td><img src="votingdata/images/greyperson.png"/></td><td>A</td></tr></table>
</tr>
</table>

<h3><span id="title"/></h3>
<embed id="images" 
type="image/svg+xml" -->

<!-- h3>Resolution 1590</h3>
<embed id="images" 
type="image/svg+xml" 
src="votingdata/images_1590.svg">

<h3>Resolution 1627</h3>
<embed id="images" 
type="image/svg+xml" 
src="votingdata/images_1627.svg">

<h3>Resolution 1663</h3>
<embed id="images" 
type="image/svg+xml" 
src="votingdata/images_1663.svg">

<h3>Resolution 1706</h3>
<embed id="images" 
type="image/svg+xml" 
src="votingdata/images_1706.svg">

<h3>Resolution 1755</h3>
<embed id="images" 
type="image/svg+xml" 
src="votingdata/images_1755.svg">

<h3>Resolution 1784</h3>
<embed id="images" 
type="image/svg+xml" 
src="votingdata/images_1784.svg">

<h3>Resolution 1812</h3>
<embed id="images" 
type="image/svg+xml" 
src="votingdata/images_1812.svg">

<h3>Resolution 1919</h3>
<embed id="images" 
type="image/svg+xml" 
src="votingdata/images_1919.svg" -->

</body>
</html>
